<script>
  let currentLanguage = "en";

  const content = {
    en: {
      title: "The Mystery of Quantum Entanglement",
      meta: "February 18, 2026 • 8 min read",
      body: `
        <p>Quantum entanglement is one of the strangest and most fascinating concepts in quantum mechanics. Einstein famously called it "spooky action at a distance".</p>

        <h2>What is Entanglement?</h2>
        <p>When two particles become entangled, the state of one instantly influences the state of the other, no matter how far apart they are. Measuring one determines the other's state immediately — even faster than light could travel between them.</p>

        <h2>Real-World Example</h2>
        <ul>
          <li>Two particles share the same spin state</li>
          <li>Measuring one instantly sets the other's spin to opposite</li>
          <li>This cannot be explained by classical physics</li>
        </ul>

        <p>This phenomenon forms the foundation of quantum computing, cryptography, and quantum teleportation research.</p>

        <h2>Mathematical Form</h2>
        <p>The joint state of two entangled particles can be:</p>

        $$ |\\psi\\rangle = \\frac{1}{\\sqrt{2}} \\left( |0\\rangle_A |1\\rangle_B - |1\\rangle_A |0\\rangle_B \\right) $$

        <p>Here A and B are two entangled particles.</p>

        <p>Another example:</p>

        $$ E = mc^2 $$

        <p>Inline example: The energy is $E = mc^2$.</p>
      `
    },
    bn: {
      title: "কোয়ান্টাম এনট্যাঙ্গলমেন্টের রহস্য",
      meta: "১৮ ফেব্রুয়ারি, ২০২৬ • ৮ মিনিট পড়া",
      body: `
        <p>কোয়ান্টাম এনট্যাঙ্গলমেন্ট হলো কোয়ান্টাম মেকানিক্সের সবচেয়ে অদ্ভুত এবং আকর্ষণীয় ধারণাগুলোর একটা। আইনস্টাইন এটাকে "spooky action at a distance" বলে অভিহিত করেছিলেন।</p>

        <h2>এনট্যাঙ্গলমেন্ট কী?</h2>
        <p>দুটি কণা যদি এনট্যাঙ্গলড হয়, তাহলে একটির অবস্থা পরিমাপ করলে অন্যটির অবস্থা তাৎক্ষণিকভাবে নির্ধারিত হয়ে যায় — যত দূরেই থাকুক না কেন।</p>

        <h2>বাস্তব উদাহরণ</h2>
        <ul>
          <li>দুটি কণা একই স্পিনের অবস্থায় থাকে</li>
          <li>একটির স্পিন পরিমাপ করলে অন্যটির স্পিন তাৎক্ষণিকভাবে বিপরীত হয়ে যায়</li>
          <li>এটা ক্লাসিক্যাল ফিজিক্স দিয়ে ব্যাখ্যা করা যায় না</li>
        </ul>

        <p>এই ধারণা কোয়ান্টাম কম্পিউটিং, ক্রিপ্টোগ্রাফি এবং টেলিপোর্টেশনের ভিত্তি।</p>

        <h2>গাণিতিক রূপ</h2>
        <p>দুটি এনট্যাঙ্গলড কণার যৌথ অবস্থা হতে পারে:</p>

        $$ |\\psi\\rangle = \\frac{1}{\\sqrt{2}} \\left( |0\\rangle_A |1\\rangle_B - |1\\rangle_A |0\\rangle_B \\right) $$

        <p>এখানে A এবং B দুটি কণা এনট্যাঙ্গলড।</p>

        <p>আরেকটা উদাহরণ:</p>

        $$ E = mc^2 $$

        <p>ইনলাইন উদাহরণ: শক্তি হলো $E = mc^2$।</p>
      `
    }
  };

  // Language Switcher
  document.getElementById("langSwitcher").addEventListener("click", () => {
    currentLanguage = currentLanguage === "en" ? "bn" : "en";
    document.getElementById("currentLang").textContent = currentLanguage === "en" ? "English" : "বাংলা";
    document.getElementById("htmlRoot").lang = currentLanguage;

    // Update content
    document.querySelector(".post-title").textContent = content[currentLanguage].title;
    document.querySelector(".post-meta").textContent = content[currentLanguage].meta;
    document.querySelector(".post-body").innerHTML = content[currentLanguage].body;

    // Re-render KaTeX after content change
    if (typeof renderMathInElement !== 'undefined') {
      renderMathInElement(document.getElementById("postBody"), {
        delimiters: [
          {left: "$$", right: "$$", display: true},
          {left: "\\[", right: "\\]", display: true},
          {left: "$", right: "$", display: false},
          {left: "\\(", right: "\\)", display: false}
        ],
        throwOnError: false
      });
    } else {
      console.warn("KaTeX auto-render not loaded yet. Waiting...");
      // Fallback: Wait a bit and retry
      setTimeout(() => {
        if (typeof renderMathInElement !== 'undefined') {
          renderMathInElement(document.getElementById("postBody"), {
            delimiters: [
              {left: "$$", right: "$$", display: true},
              {left: "\\[", right: "\\]", display: true},
              {left: "$", right: "$", display: false},
              {left: "\\(", right: "\\)", display: false}
            ],
            throwOnError: false
          });
        }
      }, 500);
    }
  });

  // Initial content load (English)
  document.querySelector(".post-title").textContent = content.en.title;
  document.querySelector(".post-meta").textContent = content.en.meta;
  document.querySelector(".post-body").innerHTML = content.en.body;

  // Initial KaTeX render with fallback
  function tryRenderMath() {
    if (typeof renderMathInElement !== 'undefined') {
      renderMathInElement(document.getElementById("postBody"), {
        delimiters: [
          {left: "$$", right: "$$", display: true},
          {left: "\\[", right: "\\]", display: true},
          {left: "$", right: "$", display: false},
          {left: "\\(", right: "\\)", display: false}
        ],
        throwOnError: false
      });
      console.log("KaTeX rendered successfully");
    } else {
      console.warn("KaTeX not loaded yet, retrying...");
      setTimeout(tryRenderMath, 300);
    }
  }

  // Start trying to render
  tryRenderMath();
</script>
</body>
</html>
